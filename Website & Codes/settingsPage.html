<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- Dashboard styles --- */
        /* -- Formats the body -- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            height: calc(var(--vh, 1vh) * 100); 
            background-color: #09ffce;
        }

        /* -- Sets a box dividing into two sections -- */
        .container-wrap {
          display: flex;
          flex-direction: column-reverse;
          background-color: var(--color-primary-p-50);
          width: 100%;
          height: 100%;
        }

        /* -- Structure of the Main Content -- */
        .-main {
            align-items: flex-start;
            flex-grow: 1;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            justify-content: center;
            background-color: #8A1532;
        }
        
        /* -- Structure of the Side login -- */
        .-side {
            justify-content: left;
            height: 90px;
            background-color: #F4F4F4;
        }

        /* -- Adjusts the two section based on screen -- */
        @media screen {
          .container-wrap {
            display: grid;
            grid-template-columns: .5fr 2fr;
            background-color: #fefefe;
          }

          .-main {
            padding-top: 25%;
          }

          .-side {
            height: auto;
            position: relative;
          }
        }

        /* -- Styles -- */
        .main-menu {
            color: #F0FFDD;
            text-align: center;
            overflow: hidden;
        }
        .main-menu h2 {
            font-size: large;
        }
        
        /* -- main section -- */
        .main-section {
            display: grid;
            line-height: 2;
            text-align: left;
            margin-top: 20%;
            padding-left: 15%;
        }
        .main-section a {
            text-decoration: none;
            color: #F0FFDD;
            font-weight: 300;
        }
        .main-section p {
            filter: opacity(50%);
        }
        
        /* -- settings section -- */
        .settings-section {
            display: grid;
            line-height: 2;
            text-align: left;
            margin-top: 20%;
            padding-left: 15%;
        }
        .settings-section p {
            filter: opacity(50%);
        }
        .settings-section a {
            text-decoration: none;
            color: #F0FFDD;
            font-weight: 300;
        }
        
        /* -- Top bar -- */
        .top-bar {
            background-color: #FFFFFF;
            top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            height: 80px;
            box-shadow: 0 15px 100px rgba(0,0,0,0.1);
        }
        .top-bar a {
            text-decoration: none;
            color: rgb(31, 31, 31);
            font-weight: 700;
            padding-right: 10%;
        }
        .top-bar i {
            font-size: large;
        }
        
        /* -- Logout area -- */
        .logout {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding-right: 20px;
            gap: 10px;
        }
        
        /* -- info section | anything you want here -- */
        .info {
            margin:auto;
            margin-left: 20px;
            font-size: 39px;
            font-weight: 200;
            margin-bottom: 10px;
        }
        
        /* -- Main Dashboard window -- */
        .dash-window {
            padding-top: 3%;
            padding-left: 5%;
            color: #501121;
            width: auto;
        }
        .header-title h1 {
            background-image: linear-gradient(#c6284f, #541122);
            color: transparent;
            background-clip: text;
            font-size: 50px;
            margin-bottom: 1%;
        }
        
        /* -- Account Creation Form Styles -- */
        .account-creation-form {
            margin-top: 30px;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 800px;
        }
        
        .account-creation-form h3 {
            color: #501121;
            margin-top: 0;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            flex: 1;
            min-width: 250px;
            position: relative;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ccc;
            border-radius: 10px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, 
        .input-group select:focus {
            outline: none;
            border-color: #8A1532;
        }
        
        .form-actions {
            margin-top: 30px;
        }
        
        button[type="submit"] {
            background-color: #8A1532;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
            width: 100%;
        }
        
        button[type="submit"]:hover {
            background-color: #501121;
        }

        /* users list */
        .users-section { margin-top: 20px; max-width: 1100px; }
        .users-list { display:grid; gap:12px; margin-top:10px; }
        .user-card { background:#fff; border-radius:10px; padding:12px; box-shadow:0 6px 16px rgba(0,0,0,0.04); display:flex; gap:12px; align-items:center; justify-content:space-between; }
        .user-info { min-width:0; flex:1; }
        .user-name { font-weight:700; color:#40101a; font-size:1rem; margin-bottom:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
        .user-email { color:#666; font-size:0.9rem; margin-bottom:6px; }
        .user-actions { display:flex; gap:8px; align-items:center; }
        .btn-sm { padding:8px 10px; border-radius:8px; border:0; cursor:pointer; font-weight:600; }
        .btn-reset { background:#f5f5f5; color:#333; border:1px solid #eee; }
        .btn-change { background:#fff3f4; color:#7e142a; border:1px solid rgba(126,20,42,0.06); }
        .btn-delete { background:#fff; color:#d64f4f; border:1px solid rgba(214,79,79,0.08); }

        /* -- Responsive adjustments -- */
        @media (max-width: 768px) {
            .container-wrap {
                grid-template-columns: 1fr;
            }
            
            .-main {
                padding-top: 15%;
            }
            
            .account-creation-form {
                margin: 20px;
                padding: 15px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            .user-card { flex-direction:column; align-items:flex-start; }
            .user-actions { width:100%; justify-content:flex-end; }
        }
    </style>
</head>
<body>
    <div class="container-wrap">
        <!-- Sidebar -->
        <div class="-main">
            <div class="main-menu">
                <img src="images/profile logo.PNG" alt="logo" width="60" height="60" title="St. Michael Academy">
                <h2 id="displayName">Loading...</h2>
                <p id="userRole">Loading...</p>
                
                <div class="main-section">
                    <p>Main</p>
                    <a href="studentList.html" id="studentListLink">Student List</a>
                    <a href="studentProgress.html" id="studentProgressLink">Student Progress</a>
                    <a href="evalControl.html" id="evalControlLink">Evaluation & Control</a>
                    <a href="accSecSetup.html" id="accSecSetupLink" class="active">Account & Section Setup</a>
                </div>
                
                <div class="settings-section">
                    <p>Settings</p>
                    <a href="settingsPage.html" id="settingsLink">Account Settings</a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="-side">
            <div class="top-bar">
                <div></div> <!-- Empty div to balance the space-between alignment -->
                <div class="logout" id="logoutBtn">
                    <span>Logout</span>
                    <i class="fas fa-sign-out"></i>
                </div>
            </div>
            
            <div class="dash-window">
                
                
                <!-- Account Creation Section -->
                <div class="account-creation-form" id="accountCreationSection">
                    <h3>Create New Account</h3>
                    
                    <form id="createUserForm">
                        <div class="form-row">
                            <div class="input-group">
                                <label for="newUserName">Full Name</label>
                                <input type="text" id="newUserName" placeholder="Teacher's full name" required>
                            </div>
                            
                            <div class="input-group">
                                <label for="newUserEmail">Email</label>
                                <input type="email" id="newUserEmail" placeholder="Teacher's email" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="newUserPassword">Password</label>
                                <input type="password" id="newUserPassword" placeholder="Set password (min 6 characters)" required minlength="6">
                            </div>
                            
                            <div class="input-group">
                                <label for="newUserRole">Role</label>
                                <select id="newUserRole" required>
                                    <option value="teacher">Teacher</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit">Create Account</button>
                        </div>
                    </form>
                </div>

                <!-- Users Section (Authentication accounts) -->
                <!-- removed: Authentication account list not needed -->
                <!--
                <div class="users-section">
                    <h3 style="margin-bottom:8px;">All Authentication Accounts</h3>
                    <div class="users-list" id="usersList"></div>
                </div>
                -->

            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script>
        // CONFIG: set this to your deployed Cloud Function base URL (example: https://us-central1-YOUR-PROJECT.cloudfunctions.net/api)
        const FUNCTIONS_BASE = 'https://us-central1-YOUR-PROJECT.cloudfunctions.net/api';

        // Firebase initialization
        const firebaseConfig = {
            apiKey: "AIzaSyDNp5EX5oKWWIFWjQ5o5e5MnaVZTgFVLwo",
            authDomain: "midnightmathscape-e8e70.firebaseapp.com",
            databaseURL: "https://midnightmathscape-e8e70-default-rtdb.firebaseio.com",
            projectId: "midnightmathscape-e8e70",
            storageBucket: "midnightmathscape-e8e70.firebasestorage.app",
            messagingSenderId: "643428213528",
            appId: "1:643428213528:web:e14dfea52725d1b647746d",
            measurementId: "G-FTYBFHGQ4T"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Helper: call Cloud Function with current user's idToken (throws on network failure)
        async function callApi(path, body = {}) {
            const user = auth.currentUser;
            if (!user) throw new Error('Not signed in');
            const idToken = await user.getIdToken();
            const res = await fetch(FUNCTIONS_BASE + path, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + idToken
                },
                body: JSON.stringify(body)
            });
            // treat non-2xx as error object from function
            const json = await res.json().catch(()=>({ ok:false, error:'Invalid JSON response' }));
            if (!res.ok) throw new Error(json && json.error ? json.error : 'Function returned error');
            return json;
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Check auth state
            auth.onAuthStateChanged(async (user) => {
                if (!user) {
                    window.location.href = 'mainWeb.html';
                    return;
                }

                // Set user info
                document.getElementById('displayName').textContent = user.displayName || user.email;
                
                // Check if admin (UI-level)
                let isAdmin = false;
                try {
                    const doc = await db.collection('users').doc(user.uid).get();
                    if (doc.exists && doc.data()?.role === 'admin') isAdmin = true;
                } catch (e) { /* ignore */ }
                if (user.email === 'admin@stmichael.edu.ph' || user.email === 'admin@stmichael.com') isAdmin = true;

                if (isAdmin) {
                    document.getElementById('userRole').textContent = 'Administrator';
                    document.getElementById('accountCreationSection').style.display = 'block';
                } else {
                    document.getElementById('userRole').textContent = 'Teacher';
                    document.getElementById('accountCreationSection').style.display = 'none';
                }

                // Try cloud functions first; fallback to Firestore-based operations on failure
                try {
                    await loadAuthUsersUsingFunctions();
                } catch (err) {
                    console.warn('Cloud Functions unavailable, falling back to Firestore-based user management:', err);
                    await loadAuthUsersFromFirestore();
                }
            });

            /* ===== Implementation A: Cloud Functions path ===== */
            async function loadAuthUsersUsingFunctions() {
                const usersListEl = document.getElementById('usersList');
                usersListEl.innerHTML = '<div style="padding:14px;color:#666;background:#fff;border-radius:8px;">Loading accounts...</div>';
                const r = await callApi('/admin/users/list', {}); // may throw
                if (!r.ok) throw new Error(r.error || 'Failed to load');
                const arr = r.users || [];
                usersListEl.innerHTML = '';
                if (arr.length === 0) {
                    usersListEl.innerHTML = '<div style="color:#666;padding:14px;background:#fff;border-radius:8px;">No accounts found.</div>';
                    return;
                }
                arr.forEach(u => renderUserCardFunction(u));
            }

            function renderUserCardFunction(u) {
                const usersListEl = document.getElementById('usersList');
                const card = document.createElement('div');
                card.className = 'user-card';
                const created = u.metadata && u.metadata.creationTime ? u.metadata.creationTime : '';
                card.innerHTML = `
                    <div class="user-info">
                        <div class="user-name" title="${u.displayName || ''}">${u.displayName || '(No name)'}</div>
                        <div class="user-email">${u.email || ''}</div>
                        <div class="user-meta" style="color:#555;font-size:0.9rem;margin-top:6px">
                            Providers: <strong style="margin-left:6px">${(u.providerData||[]).map(p=>p.providerId).join(', ')||'local'}</strong>
                            <span style="margin-left:12px;color:#888">${created}</span>
                        </div>
                    </div>
                    <div class="user-actions">
                        <button class="btn-sm btn-reset" data-email="${u.email}"><i class="fas fa-key"></i> Reset PW</button>
                        <button class="btn-sm btn-change" data-uid="${u.uid}"><i class="fas fa-pen"></i> Change PW</button>
                        <button class="btn-sm btn-delete" data-uid="${u.uid}"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                `;
                usersListEl.appendChild(card);

                // Reset -> send password reset email (client)
                card.querySelector('.btn-reset').addEventListener('click', async (ev) => {
                    const email = ev.currentTarget.dataset.email;
                    if (!email) return alert('No email available');
                    if (!confirm(`Send password reset email to ${email}?`)) return;
                    try {
                        await auth.sendPasswordResetEmail(email);
                        alert('Password reset email sent.');
                    } catch (err) {
                        alert('Error sending reset email: ' + (err.message || err));
                    }
                });

                // Change PW -> call cloud function updatePassword
                card.querySelector('.btn-change').addEventListener('click', async (ev) => {
                    const uid = ev.currentTarget.dataset.uid;
                    const pw = prompt('Enter new password (min 6 chars):');
                    if (pw === null) return;
                    if (pw.length < 6) return alert('Password must be at least 6 characters.');
                    try {
                        const res = await callApi('/admin/users/updatePassword', { uid, password: pw });
                        if (res.ok) alert('Password updated successfully.');
                        else alert('Update failed: ' + (res.error || 'unknown'));
                    } catch (err) {
                        alert('Error: ' + (err.message || err));
                    }
                });

                // Delete -> call cloud function delete
                card.querySelector('.btn-delete').addEventListener('click', async (ev) => {
                    const uid = ev.currentTarget.dataset.uid;
                    if (!confirm('Delete this Authentication user? This permanently removes the account.')) return;
                    try {
                        const res = await callApi('/admin/users/delete', { uid });
                        if (res.ok) {
                            alert('User deleted.');
                            card.remove();
                        } else {
                            alert('Delete failed: ' + (res.error || 'unknown'));
                        }
                    } catch (err) {
                        alert('Error: ' + (err.message || err));
                    }
                });
            }

            /* ===== Implementation B: Firestore fallback (no Cloud Functions) =====
               - Reads from your Firestore 'users' collection
               - Can create auth users client-side (this signs you out; code asks for admin password to re-login)
               - Can send password-reset emails
               - Can delete Firestore user documents (does NOT delete Authentication user)
            */
            async function loadAuthUsersFromFirestore() {
                const usersListEl = document.getElementById('usersList');
                usersListEl.innerHTML = '<div style="padding:14px;color:#666;background:#fff;border-radius:8px;">Loading accounts (Firestore)...</div>';
                try {
                    // use snapshot so UI updates automatically
                    db.collection('users').orderBy('createdAt','desc').onSnapshot(snapshot => {
                        usersListEl.innerHTML = '';
                        if (snapshot.empty) {
                            usersListEl.innerHTML = '<div style="color:#666;padding:14px;background:#fff;border-radius:8px;">No accounts found.</div>';
                            return;
                        }
                        snapshot.forEach(doc => {
                            const data = doc.data();
                            const uid = doc.id;
                            const card = document.createElement('div');
                            card.className = 'user-card';
                            card.innerHTML = `
                                <div class="user-info">
                                    <div class="user-name" title="${data.name || ''}">${data.name || '(No name)'}</div>
                                    <div class="user-email">${data.email || ''}</div>
                                    <div class="user-meta" style="color:#555;font-size:0.9rem;margin-top:6px">
                                        Role: <strong style="margin-left:6px">${data.role||'teacher'}</strong>
                                    </div>
                                </div>
                                <div class="user-actions">
                                    <button class="btn-sm btn-reset" data-email="${data.email}"><i class="fas fa-key"></i> Reset PW</button>
                                    <button class="btn-sm btn-change" data-uid="${uid}"><i class="fas fa-pen"></i> Change Name/Role</button>
                                    <button class="btn-sm btn-delete" data-uid="${uid}"><i class="fas fa-trash"></i> Delete</button>
                                </div>
                            `;
                            usersListEl.appendChild(card);

                            // Reset -> send password reset email
                            card.querySelector('.btn-reset').addEventListener('click', async (ev) => {
                                const email = ev.currentTarget.dataset.email;
                                if (!email) return alert('No email available');
                                if (!confirm(`Send password reset email to ${email}?`)) return;
                                try {
                                    await auth.sendPasswordResetEmail(email);
                                    alert('Password reset email sent.');
                                } catch (err) {
                                    alert('Error sending reset email: ' + (err.message || err));
                                }
                            });

                            // Change name/role -> inline edit, update Firestore
                            card.querySelector('.btn-change').addEventListener('click', (ev) => {
                                const uid = ev.currentTarget.dataset.uid;
                                const nameEl = card.querySelector('.user-name');
                                const roleStrong = card.querySelector('.user-meta strong');
                                const curName = nameEl.textContent;
                                const curRole = roleStrong.textContent;
                                nameEl.innerHTML = `<input class="input-inline" value="${curName}" id="name_input_${uid}">`;
                                roleStrong.innerHTML = `<select class="input-inline" id="role_input_${uid}">
                                    <option value="teacher" ${curRole==='teacher'?'selected':''}>Teacher</option>
                                    <option value="admin" ${curRole==='admin'?'selected':''}>Admin</option>
                                </select>`;
                                const actions = card.querySelector('.user-actions');
                                const saveBtn = document.createElement('button');
                                saveBtn.className = 'btn-sm btn-change';
                                saveBtn.textContent = 'Save';
                                const cancelBtn = document.createElement('button');
                                cancelBtn.className = 'btn-sm';
                                cancelBtn.textContent = 'Cancel';
                                actions.insertBefore(saveBtn, ev.currentTarget.nextSibling);
                                actions.insertBefore(cancelBtn, saveBtn.nextSibling);

                                saveBtn.addEventListener('click', async () => {
                                    const newName = document.getElementById(`name_input_${uid}`).value.trim();
                                    const newRole = document.getElementById(`role_input_${uid}`).value;
                                    try {
                                        await db.collection('users').doc(uid).update({
                                            name: newName,
                                            role: newRole,
                                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                                        });
                                        alert('Updated.');
                                        // snapshot listener will refresh UI
                                    } catch (err) {
                                        alert('Update failed: ' + (err.message || err));
                                    } finally {
                                        saveBtn.remove();
                                        cancelBtn.remove();
                                    }
                                });

                                cancelBtn.addEventListener('click', () => {
                                    // revert by triggering a snapshot refresh (no-op here)
                                    saveBtn.remove();
                                    cancelBtn.remove();
                                    loadAuthUsersFromFirestore();
                                });
                            });

                            // Delete -> remove Firestore doc only
                            card.querySelector('.btn-delete').addEventListener('click', async (ev) => {
                                const uid = ev.currentTarget.dataset.uid;
                                if (!confirm('Delete this account record from Firestore? This will NOT delete Authentication user.')) return;
                                try {
                                    await db.collection('users').doc(uid).delete();
                                    alert('Record deleted from Firestore.');
                                } catch (err) {
                                    alert('Delete failed: ' + (err.message || err));
                                }
                            });
                        });
                    }, err => {
                        usersListEl.innerHTML = `<div style="color:#c00;padding:12px">Snapshot error: ${err.message||err}</div>`;
                    });
                } catch (err) {
                    usersListEl.innerHTML = `<div style="color:#c00;padding:12px">${err.message||err}</div>`;
                }
            }

            // Create user: prefer cloud function create, fallback to client-side create (will sign you out)
            document.getElementById('createUserForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const name = document.getElementById('newUserName').value.trim();
                const email = document.getElementById('newUserEmail').value.trim();
                const password = document.getElementById('newUserPassword').value;
                const role = document.getElementById('newUserRole').value;
                if (!name || !email || !password) return alert('Fill required fields.');
                const submitBtn = this.querySelector('button[type="submit"]');
                submitBtn.disabled = true;

                // try cloud function create if available
                try {
                    const res = await callApi('/admin/users/create', { email, password, displayName: name, role });
                    if (res.ok) {
                        alert('Account created successfully.');
                        this.reset();
                        // refresh list (function or firestore listener will handle)
                        try { await loadAuthUsersUsingFunctions(); } catch(e){ /* ignore */ }
                        submitBtn.disabled = false;
                        return;
                    } else {
                        throw new Error(res.error || 'Create failed');
                    }
                } catch (fnErr) {
                    console.warn('Cloud create failed, falling back to client create:', fnErr);
                    // fallback: create user client-side (this signs you in as the new user)
                    try {
                        const adminEmail = auth.currentUser ? auth.currentUser.email : null;
                        const adminUid = auth.currentUser ? auth.currentUser.uid : null;
                        // require admin password to re-sign-in after create
                        const adminPassword = prompt('Creating user client-side will sign you out. Enter your admin password now to restore session after creation:');
                        if (adminPassword === null) throw new Error('Cancelled by user');

                        // create auth user (this will sign in as new user)
                        const userCred = await auth.createUserWithEmailAndPassword(email, password);
                        await userCred.user.updateProfile({ displayName: name }).catch(()=>{});
                        // write Firestore metadata
                        await db.collection('users').doc(userCred.user.uid).set({
                            email, name, role, createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });

                        // sign out and sign back in as admin
                        await auth.signOut();
                        if (!adminEmail) throw new Error('Admin email not available to restore session.');
                        await auth.signInWithEmailAndPassword(adminEmail, adminPassword);

                        alert('Account created and admin session restored.');
                        this.reset();
                        // refresh Firestore list (listener active)
                    } catch (clientErr) {
                        alert('Client create failed: ' + (clientErr.message || clientErr));
                    } finally {
                        submitBtn.disabled = false;
                    }
                }
            });

            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                auth.signOut().then(() => {
                    window.location.href = 'mainWeb.html';
                });
            });
        });

        (async()=>{
  const token = await firebase.auth().currentUser.getIdToken();
  const res = await fetch('https://us-central1-YOUR-PROJECT.cloudfunctions.net/api/admin/users/list', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer ' + token
    }
  });
  console.log('status', res.status);
  console.log(await res.text());
})();
    </script>
</body>
</html>